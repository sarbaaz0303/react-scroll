(this["webpackJsonpinfinity-scroll-react"]=this["webpackJsonpinfinity-scroll-react"]||[]).push([[0],{26:function(e,t,a){},28:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(2),s=a.n(r),c=a(19),i=a.n(c),o=(a(26),a(9)),l=a.n(o),u=a(10),p=a(20),h=a(3),m=a(4),g=a(6),d=a(5),b=(a(28),a(7)),f=a.n(b),j=f.a.create({baseURL:"https://api.pexels.com/v1",headers:{Authorization:"563492ad6f9170000100000137cc855a2fd2468180221a16889a41c3"}}),v=f.a.create({baseURL:"https://api.unsplash.com",headers:{Authorization:"Client-ID Nx29FGEJvUsUuymEBnno9x3bEfq1WC6uiB61wXfk_K0"},params:{order_by:"latest"}}),O=(a(47),function(e){Object(g.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.onFormSubmit=function(t){t.preventDefault(),e.props.handleFormSubmit(e.state.query),e.setState({query:""})},e.onInputChange=function(t){e.setState({query:t.target.value})},e}return Object(m.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"form-container",children:Object(n.jsx)("form",{className:"form",onSubmit:this.onFormSubmit,children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("input",{type:"text",className:"form-input",id:"image-search",placeholder:"Image Search",value:this.state.query,onChange:this.onInputChange}),Object(n.jsx)("label",{htmlFor:"image-search",className:"form-label",children:"Image Search"})]})})})}}]),a}(r.Component)),y=(a(48),a(49),function(e){Object(g.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={spans:0},e.imageRef=Object(r.createRef)(),e.setSpans=function(){var t=e.imageRef.current.clientHeight,a=Math.ceil(t/15)+1;e.setState({spans:a})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this.props.images;return Object(n.jsx)("div",{style:{gridRowEnd:"span ".concat(this.state.spans)},className:"image-card",children:Object(n.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",className:"link",children:Object(n.jsx)("img",{ref:this.imageRef,src:e.src,alt:e.alt,title:e.alt,className:"image"})})})}}]),a}(r.Component)),x=function(e){var t=e.images;return Object(n.jsx)("div",{className:"image-container",children:t.map((function(e){return Object(n.jsx)(y,{images:e},e.id)}))})},S=a.p+"static/media/spinner.8b736181.svg",k=function(e){Object(g.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={query:"daily new",images:[],page:1,per_page:5,prevY:0,loading:!1},e.handleFormSubmit=function(){var t=Object(p.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state.query!==a&&e.setState({query:a,images:[],page:1,prevY:0}),e.setState({loading:!0}),n=e.state.page,t.prev=3,t.next=6,v.get("/search/photos",{params:{query:e.state.query,page:e.state.page,per_page:e.state.per_page}});case 6:t.sent.data.results.map((function(t){return e.setState({images:[].concat(Object(u.a)(e.state.images),[{id:"".concat(t.id+n),src:t.urls.regular,alt:t.alt_description,link:t.links.html}])})})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.warn("Unsplash Might Be Down",t.t0);case 13:return t.prev=13,t.next=16,j.get("/search",{params:{query:a,page:e.state.page,per_page:e.state.per_page}});case 16:t.sent.data.photos.map((function(t){return e.setState({images:[].concat(Object(u.a)(e.state.images),[{id:"".concat(t.id+"a"+n),src:t.src.large2x,alt:"photographer ".concat(t.photographer),link:t.url}])})})),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(13),console.warn("Pexels Might Be Down",t.t1);case 23:5===e.state.per_page&&e.setState({per_page:10}),e.setState({loading:!1});case 25:case"end":return t.stop()}}),t,null,[[3,10],[13,20]])})));return function(e){return t.apply(this,arguments)}}(),e.handleIntersection=function(t,a){var n=t[0].boundingClientRect.y;if(e.state.prevY>n){var r=e.state.page+1;e.setState({page:r}),e.handleFormSubmit(e.state.query)}e.setState({prevY:n})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.handleFormSubmit(this.state.query);this.observer=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"0px",threshold:0}),this.observer.observe(this.loadingRef)}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[this.state.loading?Object(n.jsx)("div",{className:"scroll",children:Object(n.jsx)("img",{className:"loader",src:S,alt:"spinner"})}):null,Object(n.jsx)(O,{handleFormSubmit:this.handleFormSubmit}),Object(n.jsx)(x,{images:this.state.images}),Object(n.jsx)("div",{ref:function(t){return e.loadingRef=t},className:"load"})]})}}]),a}(r.Component);i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.querySelector("#root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.19e2809e.chunk.js.map